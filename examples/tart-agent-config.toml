# Example tart-agent configuration
#
# NOTE: For first-time setup, tart-agent can bootstrap from CLI arguments:
#   tart-agent --coordinator-url https://localhost:9443 \
#              --token REG_TOKEN_FROM_COORDINATOR \
#              --ca-cert /path/to/ca.crt \
#              --labels macos,arm64
#
# This creates a config file automatically. Subsequent runs just need:
#   tart-agent
#
# This example config file is for reference or manual setup.

[coordinator]
url = "https://localhost:9443"
hostname = "localhost"

[tls]
# CA certificate from coordinator (copy from coordinator's data dir)
ca_cert = "~/.config/tart-agent/certs/ca.crt"
# Directory where agent stores its client certificate after registration
certs_dir = "~/.config/tart-agent/certs"

[agent]
# Labels this agent advertises - used for job matching
labels = ["self-hosted", "macos", "arm64", "test-sequoia"]

[tart]
# Base VM image to clone for runners
base_image = "ghcr.io/cirruslabs/macos-sequoia-base:latest"
# Max concurrent VMs (Apple Virtualization limit is 2)
max_concurrent_vms = 2

[cleanup]
# Cleanup stale VMs older than this (hours)
max_vm_age_hours = 2
# How often to run cleanup (minutes)
cleanup_interval_mins = 15

[reconnect]
# Initial reconnection delay (seconds)
initial_delay_secs = 1
# Max reconnection delay (seconds)
max_delay_secs = 60
